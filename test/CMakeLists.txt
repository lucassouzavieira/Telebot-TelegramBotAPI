cmake_minimum_required (VERSION 3.7)
project(TelebotTest)

FIND_PACKAGE( OpenMP REQUIRED)
if(OPENMP_FOUND)
message("OPENMP FOUND")
set(CMAKE_BUILD_TYPE Debug)
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${OpenMP_C_FLAGS}")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}")
set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${OpenMP_EXE_LINKER_FLAGS}")
endif()

include_directories (${PROJECT_SOURCE_DIR}/../include)

add_definitions("-g")

add_executable(test_lib test_lib.c)
add_executable(libtest test_telebot.c)
add_executable(update test_update.c)
add_executable(file test_file.c)
add_executable(userprofilephotos test_userprofilephotos.c)
add_executable(sendphotos test_sendphotos.c)
add_executable(sendaudio test_sendaudio.c)
add_executable(senddocument test_senddocument.c)
add_executable(sendvideo test_sendvideo.c)
add_executable(sendvoice test_sendvoice.c)
add_executable(sendvideonote test_sendvideonote.c)
add_executable(sendmessage test_sendmessage.c)
add_executable(all_api test_api.c)

if (CMAKE_SYSTEM_NAME STREQUAL Linux)
	target_link_libraries(test_lib jansson libcurl.so libtelebot)
	target_link_libraries(libtest jansson libcurl.so libtelebot)
	target_link_libraries(update jansson libcurl.so libtelebot)
	target_link_libraries(file jansson libcurl.so libtelebot)
	target_link_libraries(userprofilephotos jansson libcurl.so libtelebot)
	target_link_libraries(sendphotos jansson libcurl.so libtelebot)
	target_link_libraries(sendaudio jansson libcurl.so libtelebot)
	target_link_libraries(senddocument jansson libcurl.so libtelebot)
	target_link_libraries(sendvideo jansson libcurl.so libtelebot)
	target_link_libraries(sendvoice jansson libcurl.so libtelebot)
	target_link_libraries(sendvideonote jansson libcurl.so libtelebot)
	target_link_libraries(sendmessage jansson libcurl.so libtelebot)
	target_link_libraries(all_api jansson libcurl.so libtelebot)
endif (CMAKE_SYSTEM_NAME STREQUAL Linux)

if (WIN32)
	target_link_libraries(test_lib jansson libcurl_a libtelebot)
	target_link_libraries(libtest jansson libcurl_a libtelebot)
	target_link_libraries(update jansson libcurl_a libtelebot)
	target_link_libraries(file jansson libcurl_a libtelebot)
	target_link_libraries(userprofilephotos jansson libcurl_a libtelebot)
	target_link_libraries(sendphotos jansson libcurl_a libtelebot)
	target_link_libraries(sendphotos jansson libcurl_a libtelebot)
	target_link_libraries(sendaudio jansson libcurl_a libtelebot)
	target_link_libraries(senddocument jansson libcurl_a libtelebot)
	target_link_libraries(sendvideo jansson libcurl_a libtelebot)
	target_link_libraries(sendvideonote jansson libcurl_a libtelebot)
	target_link_libraries(sendmessage jansson libcurl.so libtelebot)
	target_link_libraries(all_api jansson libcurl.so libtelebot)
endif (WIN32)
